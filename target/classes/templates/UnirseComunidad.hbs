{{> templates/base }}
{{#partial "tituloYcss"}}
    <link rel="stylesheet" href="/css/UnirseComunidad.css">
    <title>Comunidades</title>
{{/partial}}
{{> templates/base }}

{{#partial "contenido"}}
    <div class="row">
        {{#if usuarioBasico}}
            <div id="crearComunidad">
                <h2>Crea tu propia comunidad</h2>
                <form id="formCrearComunidad">
                    <input class="form-control input-field" type="text" id="nombre" name="nombre" placeholder="Ingrese el nombre de la comunidad">
                    <button type="submit" class="btn btn-success" id="btn-crear-comunidad">Crear Comunidad</button>
                </form>
            </div>
            <div class="base">
                <h1>Mis Comunidades</h1>
                {{#if comunidadesUsuario.empty}}
                    <h4>No te has unido a ninguna comunidad</h4>
                {{else}}
                    <div class="row row-cols-1 row-cols-md-2 g-4">
                        {{#each comunidadesUsuario}}
                            <div class="col">
                                <div class="tarjetaComunidad">
                                    <div>
                                        <h2>{{this.nombre}}</h2>
                                        <h4>Miembros: {{this.cantidadMiembros}}</h4>
                                    </div>
                                    <div class="button-group">
                                        <button type="button" class="btn boton" onclick="window.location.href='/incidentes?comunidad=' + {{this.id}} ">Incidentes</button>
                                    </div>
                                    <div class="button-group">
                                        <button type="button" class="btn btn-secondary" onclick="window.location.href='/comunidades/{{this.id}}'">Informacion</button>
                                    </div>
                                </div>
                            </div>
                        {{/each}}
                    </div>
                {{/if}}
            </div>
        {{else}}
        <div class="base">
            <br>
        </div>
        {{/if}}
        <div class="base">
            {{#if usuarioBasico}}
                <h1>Tambien podes unirte a:</h1>
            {{else}}
                <h1>Comunidades:</h1>
            {{/if}}
            {{#if comunidades.empty}}
                {{#if usuarioBasico}}
                    <h4>No hay comunidades disponibles para que te unas</h4>
                {{else}}
                    <h4>No hay comunidades creadas</h4>
                {{/if}}
            {{else}}
                <div class="row row-cols-1 row-cols-md-2 g-4">
                    {{#each comunidades}}
                        <div class="col">
                            <div class="tarjetaComunidad">
                                <div>
                                    <h2>{{this.nombre}}</h2>
                                    <h4>Miembros: {{this.cantidadMiembros}}</h4>
                                </div>
                                {{#if usuarioBasico}}
                                <div class="button-group">
                                    <button type="button" class="btn btn-success btn-unirse" data-comunidad-id="{{this.id}}">Unirme</button>
                                </div>
                                {{else}}
                                    <div class="button-group">
                                        <button type="button" class="btn boton" onclick="window.location.href='/incidentes?comunidad=' + {{this.id}} ">Incidentes</button>
                                    </div>
                                    <div class="button-group">
                                        <button type="button" class="btn btn-danger btn-eliminar" data-comunidad-id="{{this.id}}">Eliminar</button>
                                    </div>
                                    <div class="button-group">
                                        <button type="button" class="btn btn-secondary" onclick="window.location.href='/comunidades/{{this.id}}'">Informacion</button>
                                    </div>
                                {{/if}}
                            </div>
                        </div>
                    {{/each}}
                </div>
            {{/if}}
        </div>
    </div>
    <script src="js/EliminarComunidad.js"></script>
    <script src="js/UnirseAComunidad.js"></script>
    <script src="js/CrearComunidad.js"></script>
    {{#if usuarioBasico}}
        <script src="/js/EnviarUbicacion.js"></script>
    {{/if}}
{{/partial}}
{{> templates/base }}
